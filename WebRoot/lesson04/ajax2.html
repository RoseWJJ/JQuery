<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>ajax.xhtml</title>
		<meta http-equiv="keywords" content="enter,your,keywords,here" />
		<meta http-equiv="description"
			content="A short description of this page." />
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

		<script type="text/javascript" src="JQuery/WebRoot/lesson05/jquery-3.2.1.js">
</script>
		<script type="text/javascript">
		$(function(){
			$("input[type='button']").click(function(){
			  var city=$("#address").val();
			  var url = "http://restapi.amap.com/v3/weather/weatherInfo?key=f08635e30d67c7c72529ab636107c209&city="+city;
				$.ajax({
				   type: "GET",
				   url: url,
				   dataType:'json',
				   success: function(msg){
				   $("img").remove();
				   var tq=msg.lives[0].weather;
					   if(tq=="晴"){
					   	$(document.body).append("<div><img src='sun.png'/></div>");
					   }else{
					   	$(document.body).append("<div><img src='yun.png'/></div>");
					   }
				   }
				});
			})
		})
</script>
	</head>
	<body>
		<input id="address" type="text"/>
		<input type="button" value="查询天气"/>
	</body>
</html>
